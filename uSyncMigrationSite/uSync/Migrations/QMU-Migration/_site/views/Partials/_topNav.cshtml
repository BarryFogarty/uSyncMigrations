@using System.Web.Mvc
@using System.Web.Mvc.Html
@using Microsoft.CSharp.RuntimeBinder
@using Our.Umbraco.DocTypeGridEditor.Helpers
@using Our.Umbraco.DocTypeGridEditor.Web.Extensions
@using Umbraco.Core.Models
@using Umbraco.Core.Models.PublishedContent
@using ContentModels = Umbraco.Web.PublishedModels;
@using Umbraco.Web
@using Umbraco.Web.Models
@using QMUCloud.Core.Extensions

@inherits Umbraco.Web.Mvc.UmbracoViewPage<dynamic>

@{
    var topNavigation = Umbraco.GetNavigationNode("Top Navigation");
    if (topNavigation != null)
    {
        foreach (var item in topNavigation.Children(x => x.ContentType.Alias == "navigationItem"))
        {
            var navLink = item.Value<Umbraco.Web.Models.Link>("Link");
            <li>
                @if (navLink != null)
                {
                    <a href="@navLink.Url" target="@navLink.Target">
                        <span>@navLink.Name</span>
                    </a>
                }
                else
                {
                    <a>
                        <span>
                            @item.Name
                        </span>
                    </a>
                }
            </li> 
        }
    }
}

